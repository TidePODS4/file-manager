# file-manager

АВП Лабораторная 3. Главные сервисы в проекте:

* *Keycloak* (сервер авторизации)
* *backend* (spring boot rest api)
* *frontend* (vuetify)

## Для начала

Чтобы запустить все необходимые приложения, вам нужно установить Docker и Docker Compose

### Изменение host файла

Помимо установки Docker, вам также необходимо отредактировать файл **hosts** вашей операционной системы.

Полезная нагрузка JWT содержит поле **iss** (эмитент). Это URL сервера авторизации, в нашем случае Keycloak. В серверном приложении нам нужно указать точно такой же URL для keycloak. Но проблема в том, что сеть Docker и хосты компьютера не совпадают. С точки зрения серверной службы keycloak будет иметь другой URL, чем с точки зрения пользователя.

Чтобы устранить эту проблему, вам нужно добавить следующую строку в файл *hosts*:
```
127.0.0.1 keycloak
```

Расположение файла *hosts* в разных операционных системах:
* [Linux (Ubuntu)](http://manpages.ubuntu.com/manpages/trusty/man5/hosts.5.html)
* [Windows 10](https://www.groovypost.com/howto/edit-hosts-file-windows-10/)
* [Mac](https://www.imore.com/how-edit-your-macs-hosts-file-and-why-you-would-want#page1)

## Запуск

Чтобы запустить все приложения, просто выполните следующую команду в терминале:

```bash
> docker compose up
```
Для тихого запуска используйте эту команду:

```bash
> docker compose up -d
```

Чтобы проверить, все ли работает, вы можете посмотреть все запущенные контейнеры:

```bash
> docker ps
```

Как только все контейнеры запустятся, вы можете зайти на страницу `http://localhost:3000`. После регистрации вы можете поиграть с приложением.


Чтобы войти на страницу администратора Keycloak, используйте URL-адрес `http://localhost:8080`. Логин и пароль - `admin`.

## Завершение программы

Для остановки контейнеров нажмите в консоли `^C`.

Для удаления контейнеров используйте команду: 
```bash
> docker compose down
```
